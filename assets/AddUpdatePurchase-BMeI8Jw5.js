import{j as r,r as c,v as F,k as N}from"./index-UOtk6gf7.js";import{a as _}from"./js.cookie-Cz0CWeBA.js";import{r as v,i as k,f as I,M as S,g as p,h as x,j as h,k as f,B as A,l as g,I as j,m as B,n as E}from"./index.esm-Cw2wCPp9.js";import"./DefaultLayout-JVD4nd9k.js";import"./index.es-Bg_JYey1.js";import"./cil-user-Ddrdy7PS.js";var m={},Q=k;Object.defineProperty(m,"__esModule",{value:!0});var R=m.default=void 0,K=Q(v()),O=r;R=m.default=(0,K.default)((0,O.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const W=()=>{const[e,o]=c.useState({}),d=c.useMemo(()=>[{accessorKey:"PricePerItem",header:"السعر",required:!0},{accessorKey:"Quantity",header:"الكمية",muiEditTextFieldProps:{required:!0,error:!!(e!=null&&e.firstName),helperText:e==null?void 0:e.firstName,onFocus:()=>o({...e,Quantity:void 0})}},{accessorKey:"description",header:"الوصف",muiEditTextFieldProps:{required:!0,error:!!(e!=null&&e.description),helperText:e==null?void 0:e.description,onFocus:()=>o({...e,description:void 0})}},{accessorKey:"itemName",header:"اسم المنتج",muiEditTextFieldProps:{required:!0,error:!!(e!=null&&e.itemName),helperText:e==null?void 0:e.itemName,onFocus:()=>o({...e,itemName:void 0})}},{accessorKey:"id",header:"#",enableEditing:!1,muiEditTextFieldProps:{error:!!(e!=null&&e.id),helperText:e==null?void 0:e.id}}],[e]),[n,s]=c.useState([]),{id:u}=F();c.useEffect(()=>{if(u!=0){async function t(){const i=await V(u);console.log(i)}t()}},[u]);const b=async({values:t,table:i})=>{console.log(t),console.log(i);const a=w(t);if(Object.values(a).some(l=>l)){o(a);return}o({}),await D(t),i.setCreatingRow(null)},C=async({values:t,table:i})=>{const a=w(t);if(Object.values(a).some(l=>l)){o(a);return}o({}),await P(t),i.setEditingRow(null)},T=t=>{window.confirm("Are you sure you want to delete this user?")&&(s(i=>i.filter(a=>a.id!=t.original.id)),s(i=>{let a=1;return i.map(l=>{const q={...l,id:a};return a++,q})}))};function D(t){t.id=n.length+1,s(i=>[...i,{...t}])}function P(t){s(i=>i.map(a=>a.id===t.id?{...a,...t}:a))}c.useContext(N).color;const M=I({columns:d,data:n,createDisplayMode:"modal",editDisplayMode:"modal",enableEditing:!0,onCreatingRowSave:b,onEditingRowSave:C,onCreatingRowCancel:()=>o({}),onEditingRowCancel:()=>o({}),renderCreateRowDialogContent:({table:t,row:i,internalEditComponents:a})=>r.jsxs(r.Fragment,{children:[r.jsx(p,{variant:"h3",children:"أدراج بند"}),r.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:"1rem"},children:[a," "]}),r.jsx(h,{children:r.jsx(f,{variant:"text",table:t,row:i})})]}),renderEditRowDialogContent:({table:t,row:i,internalEditComponents:a})=>r.jsxs(r.Fragment,{children:[r.jsx(p,{variant:"h3",children:"Edit User"}),r.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[a," "]}),r.jsx(h,{children:r.jsx(f,{variant:"text",table:t,row:i})})]}),renderRowActions:({row:t,table:i})=>r.jsxs(A,{sx:{display:"flex",gap:"1rem"},children:[r.jsx(g,{title:"تعديل",children:r.jsx(j,{onClick:()=>i.setEditingRow(t),children:r.jsx(B,{})})}),r.jsx(g,{title:"حذف",children:r.jsx(j,{color:"error",onClick:()=>T(t),children:r.jsx(R,{})})})]}),renderTopToolbarCustomActions:({table:t})=>r.jsx(E,{variant:"contained",onClick:()=>{t.setCreatingRow(!0)},children:"أدراج بند"}),muiTableHeadCellProps:{sx:t=>({color:t.palette.text.secondary})}});return r.jsx(S,{table:M})},y=e=>!!e.length;function w(e){return{Quantity:y(e.Quantity)?"":"Quantity is Required",itemName:y(e.Quantity)?"":"itemName is Required"}}async function V(e){const o=_.get("LOGIN_Info");let d=null;return await fetch(`//www.homecproject.somee.com/api/Purchase/${e}`,{headers:{Authorization:"Bearer "+o,"Content-type":"application/json"}}).then(n=>n.json()).then(n=>{d=n}).catch(n=>console.error("Fetch error:",n)),d}export{V as GetPurchasesInfo,W as default};
