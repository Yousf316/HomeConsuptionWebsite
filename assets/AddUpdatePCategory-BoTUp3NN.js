import{r as u,U as S,j as e,R as y,x as w}from"./index-B8GXP3NQ.js";import"./js.cookie-Cz0CWeBA.js";import{F as s,R as g,C as p}from"./Row-D5t1_bNo.js";import{T as v}from"./Alert-BLiHCzkI.js";import{a as D,A as U,S as A}from"./Purchase_CategoriesApi-DvrM_xKn.js";import{B as d}from"./Button-OY5uUh63.js";const x={"Save-form-main":"_Save-form-main_840r9_2"};function _({id:r}){const[l,o]=u.useState(!0),i=u.useContext(S),[a,n]=u.useState({pCategoryID:"لا يوجد",categoryName:""});function c(t){n(m=>({...m,pCategoryID:r,categoryName:t.categoryName})),o(!1)}function f(){n(t=>({...t,pCategoryID:"لا يوجد",categoryName:""})),o(!0)}function C(t){n({...a,categoryName:t})}async function h(){const t=await D(r);t.status?f():c(t)}async function I(){console.log(a);const t={categoryName:a.categoryName,createdByUserID:i.userInfo.UserID},m=await U(t);return window.location.hash=`/home/Purchase_Category/${m.pCategoryID}`,!0}async function j(){const t={pCategoryID:r,categoryName:a.categoryName,updatedByUserID:i.userInfo.UserID};return await A(t,a.pCategoryID),!0}u.useEffect(()=>{f(),r!=0&&h()},[r]);async function N(){return await P()!=!0?!1:l?!!await I():!!await j()}async function P(){return a.categoryName.trim()!=""}return e.jsxs(e.Fragment,{children:[e.jsxs(s,{className:x["Save-form-main"],children:[e.jsxs(s.Group,{as:g,controlId:"formPlaintextStoreID",children:[e.jsx(s.Label,{column:!0,sm:"2",style:{minWidth:"150px"},children:"رقم الصنف :"}),e.jsx(p,{sm:"3",children:e.jsx(s.Control,{sm:"2",value:a.pCategoryID,plaintext:!0,readOnly:!0,defaultValue:"لا يوجد"})})]}),e.jsxs(s.Group,{as:g,style:{marginTop:"50px",marginBottom:"25px"},controlId:"formPlaintextStoreName",children:[e.jsx(s.Label,{column:!0,sm:"2",style:{minWidth:"150px"},children:"اسم الصنف :"}),e.jsx(p,{sm:"3",children:e.jsx(s.Control,{value:a.categoryName,onChange:t=>C(t.target.value),sm:"2",type:"text",placeholder:"اسم الصنف",style:{minWidth:"250px"}})})]})]}),e.jsx(F,{SaveOpreation:N})]})}function F({SaveOpreation:r}){const[l,o]=y.useState(!1),[i,a]=y.useState(""),[n,c]=y.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(s,{className:x["Save-form-main"],children:e.jsxs("div",{children:[e.jsx(d,{variant:"outlined",style:{minWidth:"150px",margin:"25px"},children:"الغاء"}),e.jsx(d,{variant:"contained",style:{minWidth:"150px",margin:"25px"},onClick:async()=>{await r()?(a("success"),c("تمت العملية بنجاح")):(a("error"),c("فشلت العملية")),o(!0)},children:"حفظ"})]})}),e.jsx(v,{open:l,setOpen:o,Message:n,severityType:i})]})}const E=()=>{const{id:r}=w();return e.jsx(e.Fragment,{children:e.jsx(_,{id:r})})};export{E as default};
