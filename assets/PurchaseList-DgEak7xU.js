import{r,j as a,k as E}from"./index-UOtk6gf7.js";import{a as D}from"./js.cookie-Cz0CWeBA.js";import{_ as d,u as w,T as S,R,D as I,a as L,b as T,c as P,d as z,M as k,e as v}from"./index.esm-Cw2wCPp9.js";import"./DefaultLayout-JVD4nd9k.js";import"./index.es-Bg_JYey1.js";import"./cil-user-Ddrdy7PS.js";const b=r.createContext(null);function j(){return r.useContext(b)}const H=typeof Symbol=="function"&&Symbol.for,$=H?Symbol.for("mui.nested"):"__THEME_NESTED__";function A(t,o){return typeof o=="function"?o(t):d({},t,o)}function q(t){const{children:o,theme:n}=t,e=j(),i=r.useMemo(()=>{const s=e===null?n:A(e,n);return s!=null&&(s[$]=e!==null),s},[n,e]);return a.jsx(b.Provider,{value:i,children:o})}const g={};function M(t,o,n,e=!1){return r.useMemo(()=>{const i=t&&o[t]||o;if(typeof n=="function"){const s=n(i),c=t?d({},o,{[t]:s}):s;return e?()=>c:c}return t?d({},o,{[t]:n}):d({},o,n)},[t,o,n,e])}function K(t){const{children:o,theme:n,themeId:e}=t,i=w(g),s=j()||g,c=M(e,i,n),h=M(e,s,n,!0),m=c.direction==="rtl";return a.jsx(q,{theme:h,children:a.jsx(S.Provider,{value:c,children:a.jsx(R,{value:m,children:a.jsx(I,{value:c==null?void 0:c.components,children:o})})})})}const B=["theme"];function G(t){let{theme:o}=t,n=L(t,B);const e=o[T];return a.jsx(K,d({},n,{themeId:e?T:void 0,theme:e||o}))}const N=P(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),V=P(a.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");function Z(){const t=r.useMemo(()=>[{accessorKey:"id",header:"#"},{accessorKey:"Purchase_Date",header:"تاريخ الأصدار"},{accessorKey:"Purchase_Type",header:"النوع"},{accessorKey:"Purchase_Total",header:"المجموع"}],[]),[o,n]=r.useState([]),[e,i]=r.useState({pageIndex:0}),[s,c]=r.useState(-1);r.useEffect(()=>{const l=D.get("LOGIN_Info");async function p(){const C=(await O(l,e.pageIndex+1)).map((u,_)=>({key:_,id:String(u.PurchaseID),Purchase_Date:new Date(u.IssueDate).toLocaleDateString(),Purchase_Type:u.TypeName,Purchase_Total:u.TotalAfterTax}));c(u=>e.pageIndex+2),n(C)}p()},[e.pageIndex]);var h=document.querySelector(".MuiBox-root.css-exd1zr");h!=null&&h.remove();var m=document.querySelector("#root > div > div.wrapper.d-flex.flex-column.min-vh-100 > div.body.flex-grow-1 > div > div > div.MuiTableContainer-root.css-nhjqqh-MuiTableContainer-root > table > thead > tr > th.MuiTableCell-root.MuiTableCell-head.MuiTableCell-alignLeft.MuiTableCell-sizeMedium.css-eb6d7g-MuiTableCell-root > div > div.Mui-TableHeadCell-Content-Labels.MuiBox-root.css-4ng264 > div");m!=null&&m.remove();const f=r.useContext(E),y=r.useMemo(()=>z({palette:{mode:f.color===""?"dark":f.color}}),[f.color]),x=l=>{window.location.hash=`/home/Purchase/${l}`};return a.jsx(G,{theme:y,children:a.jsx(k,{columns:t,data:o,enableRowActions:!0,manualPagination:!0,pageCount:s,onPaginationChange:i,state:{pagination:e},paginationDisplayMode:"pages",renderRowActionMenuItems:({row:l,table:p})=>[a.jsx(v,{icon:a.jsx(V,{}),label:"Edit",onClick:()=>x(l.original.id),table:p},"edit"),a.jsx(v,{icon:a.jsx(N,{}),label:"Delete",onClick:()=>x(l.original.id),table:p},"delete")]})})}async function O(t,o){let n=null;return await fetch(`//www.homecproject.somee.com/api/Purchase/GetPurchasesTable/${o}`,{headers:{Authorization:"Bearer "+t,"Content-type":"application/json"}}).then(e=>e.json()).then(e=>{n=e}).catch(e=>console.error("Fetch error:",e)),n}export{O as GetPurchasesTable,Z as default};
