import{r as t,R as n,k as j,j as a}from"./index-B8GXP3NQ.js";import{T as R,M as A,a as m,E as I,D as _}from"./Edit-xcpKZgDh.js";import{G as k,D as E}from"./PurchaseApi-B9a8JRzD.js";import{T as K}from"./Alert-BLiHCzkI.js";import{h as N}from"./Button-OY5uUh63.js";import"./DatePicker-CzS-4UUP.js";import"./DefaultLayout-D7RIGKjx.js";import"./index.es-B9SKoo5B.js";import"./cil-user-Ddrdy7PS.js";import"./js.cookie-Cz0CWeBA.js";import"./CircularProgress-DaaIr85R.js";function V(){const p=t.useMemo(()=>[{accessorKey:"id",header:"#"},{accessorKey:"Purchase_Date",header:"تاريخ الأصدار"},{accessorKey:"StoreName",header:"اسم المتجر"},{accessorKey:"Purchase_Type",header:"النوع"},{accessorKey:"Purchase_Total",header:"المجموع"}],[]),[g,T]=t.useState([]),[r,x]=t.useState({pageIndex:0}),[M,P]=t.useState(-1),[f,c]=n.useState(!1),[y,l]=n.useState(""),[v,u]=n.useState("");t.useEffect(()=>{async function e(){const o=await k(r.pageIndex+1),S=JSON.parse(o.purchasejson).map((s,w)=>({key:w,id:String(s.PurchaseID),Purchase_Date:new Date(s.IssueDate).toLocaleDateString(),Purchase_Type:s.TypeName,Purchase_Total:s.TotalAfterTax,StoreName:s.StoreName}));P(s=>r.pageIndex+5),T(S)}e()},[r.pageIndex]);var d=document.querySelector(".MuiBox-root.css-exd1zr");d!=null&&d.remove();var h=document.querySelector("#root > div > div.wrapper.d-flex.flex-column.min-vh-100 > div.body.flex-grow-1 > div > div > div.MuiTableContainer-root.css-nhjqqh-MuiTableContainer-root > table > thead > tr > th.MuiTableCell-root.MuiTableCell-head.MuiTableCell-alignLeft.MuiTableCell-sizeMedium.css-eb6d7g-MuiTableCell-root > div > div.Mui-TableHeadCell-Content-Labels.MuiBox-root.css-4ng264 > div");h!=null&&h.remove();const i=t.useContext(j),b=t.useMemo(()=>N({palette:{mode:i.color===""?"dark":i.color}}),[i.color]),C=e=>{window.location.hash=`/home/Purchase/${e}`},D=async e=>{await E(e)!=null?(l("success"),u("تمت العملية بنجاح")):(l("error"),u("فشلت العملية")),c(!0)};return a.jsxs(a.Fragment,{children:[a.jsx(K,{open:f,setOpen:c,Message:v,severityType:y}),a.jsx(R,{theme:b,children:a.jsx(A,{columns:p,data:g,enableRowActions:!0,manualPagination:!0,pageCount:M,onPaginationChange:x,state:{pagination:r},paginationDisplayMode:"pages",renderRowActionMenuItems:({row:e,table:o})=>[a.jsx(m,{icon:a.jsx(I,{}),label:"تعديل",onClick:()=>C(e.original.id),table:o},"edit"),a.jsx(m,{icon:a.jsx(_,{}),label:"حذف",onClick:async()=>{window.confirm(`هل انت متاكد من حذف الفاتورة رقم : ${e.original.id} ؟ `)&&await D(e.original.id)},table:o},"delete")]})})]})}export{V as default};
